<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="simplecookie_policy" content="/policies/cookies/" />
  <script>
    // Compute asset URLs with basename at load time
    (function () {
      const raw = (window.process && window.process.ENV && window.process.ENV.GH_BASENAME) || window.BASENAME || "";
      const clean = String(raw).replace(/^\/+|\/+$/g, "");
      const basePrefix = clean ? "/" + clean : ""; // "/archive" or ""
      // Helper to join basePrefix and asset path without producing double slashes
      function joinAsset(prefix, assetPath) {
        const p = String(prefix || "").replace(/\/$/, "");
        const a = String(assetPath || "").replace(/^\//, "");
        return (p ? p + "/" + a : "/" + a);
      }

      // Create link elements via DOM APIs to avoid accidental HTML mangling
      const cur = document.currentScript;
      const links = [
        { rel: 'icon', href: joinAsset(basePrefix, 'assets/favicon.ico') },
        { rel: 'apple-touch-icon', href: joinAsset(basePrefix, 'assets/apple-touch-icon.png') },
        { rel: 'manifest', href: joinAsset(basePrefix, 'assets/manifest.json') },
      ];
      links.forEach((attrs) => {
        const el = document.createElement('link');
        el.rel = attrs.rel;
        el.href = attrs.href;
        if (cur && cur.parentNode) cur.parentNode.insertBefore(el, cur.nextSibling);
        else document.head.appendChild(el);
      });
    })();
  </script>

</head>

<body>
  <div id="app" style="height: 100%; min-height: 100%"></div>
  <script>
    // Track chunk loading errors for debugging
    window.__chunkLoadErrors = [];
    window.__importErrors = [];

    window.addEventListener('error', function (e) {
      if (e.target && (e.target.tagName === 'SCRIPT' || e.target.tagName === 'LINK')) {
        const url = e.target.src || e.target.href;
        console.error('[chunk-load-error]', url, e);
        window.__chunkLoadErrors.push({
          url: url,
          tag: e.target.tagName,
          error: e.message || 'load failed'
        });
      }
    }, true);

    // Intercept dynamic import errors
    window.addEventListener('unhandledrejection', function (e) {
      if (e.reason && e.reason.message) {
        console.error('[unhandled-rejection]', e.reason);
        if (e.reason.message.includes('import') || e.reason.message.includes('chunk')) {
          window.__importErrors.push({
            message: e.reason.message,
            stack: e.reason.stack
          });
        }
      }
    });

    // Log webpack errors for debugging
    setTimeout(function () {
      if (window.__chunkLoadErrors.length > 0) {
        console.error('[chunk-load-errors] Failed to load:', window.__chunkLoadErrors);
      }
      if (window.__importErrors.length > 0) {
        console.error('[import-errors] Dynamic import failures:', window.__importErrors);
      }
    }, 2000);
  </script>
  <script>
    (function () {
      var raw = (window.process && window.process.ENV && window.process.ENV.GH_BASENAME) || window.BASENAME || "";
      var clean = String(raw).replace(/^\/+|\/+$/g, "");
      var basePrefix = clean ? "/" + clean : "";
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.id = 'simple-cookie-js';
      s.src = (function (p, asset) {
        var pp = String(p || '').replace(/\/$/, '');
        var aa = String(asset || '').replace(/^\//, '');
        return (pp ? pp + '/' + aa : '/' + aa);
      })(basePrefix, 'js/cookies-gcc.js');
      document.currentScript ? document.currentScript.after(s) : document.body.appendChild(s);
    })();
  </script>
</body>

</html>